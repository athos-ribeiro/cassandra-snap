if [ -z "$SNAP_COMMON" ]; then
    # https://github.com/snapcore/snapd/commit/da9fa37
    export SNAP_COMMON="$SNAP_DATA/../common"
fi
export CASSANDRA_HOME="$SNAP_DATA"
export STATIC_CONF="$SNAP/etc/cassandra"

export CASSANDRA_CONF="$SNAP_DATA/etc"
export CASSANDRA_LOGS="$SNAP_DATA/logs"
export CASSANDRA_DATA="$SNAP_COMMON/data"

if [ -n "$CLASSPATH" ]; then
    CLASSPATH=$CLASSPATH:$CASSANDRA_CONF
else
    CLASSPATH=$CASSANDRA_CONF
fi

for jar in $SNAP/usr/share/cassandra/lib/*.jar; do
    CLASSPATH="$CLASSPATH:$jar"
done

export CLASSPATH

case $(arch) in
    x86_64)
        export ARCH=amd64
        ;;
    aarch64)
        export ARCH=arm64
        ;;
    ppc64le)
        export ARCH=ppc64el
        ;;
    s390x)
        export ARCH=s390x
        ;;
    *)
        echo "Unsupported architecture $(arch)"
        exit 1
        ;;
esac
export JAVA_VERSION=11
export JAVA="$SNAP"/usr/lib/jvm/java-"$JAVA_VERSION"-openjdk-"$ARCH"/bin/java
export CASSANDRA_INCLUDE=
export CASSANDRA_USE_JDK11=true
